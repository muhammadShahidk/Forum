import{A as _e,n as j,o as le,p as se,r as me,s as ce,u as de,w as R,x as pe,y as x,z as ue}from"./chunk-KFATWQFB.js";import{$a as l,Bb as F,Cb as P,Da as s,Ea as y,Fb as H,Ma as u,Md as Q,Qa as d,Sd as B,Td as L,Ud as W,Va as V,Vb as $,Vd as q,Zb as N,_a as r,a as E,ab as v,b as U,bb as C,c as b,cb as g,da as A,eb as M,ia as f,ib as _,ja as h,kb as p,le as G,me as J,nd as z,ne as K,oe as X,pe as Y,qe as Z,rb as D,re as ee,sb as k,se as te,tb as T,te as ie,ub as O,ue as oe,vb as c,ve as ne,wb as I,we as ae,xb as S,xe as re}from"./chunk-U7BX6727.js";function fe(e,i){if(e&1){let t=M();r(0,"button",17),_("click",function(){f(t);let o=p();return h(o.openBottomSheet())}),c(1," Change Status "),l()}}function he(e,i){if(e&1){let t=M();r(0,"th",18)(1,"mat-checkbox",19),_("change",function(o){f(t);let a=p();return h(o?a.toggleAllRows():null)}),l()()}if(e&2){let t=p();s(),d("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function Ce(e,i){if(e&1){let t=M();r(0,"td",20)(1,"mat-checkbox",21),_("click",function(o){return o.stopPropagation()})("change",function(o){let m=f(t).$implicit,w=p();return h(o?w.selection.toggle(m):null)}),l()()}if(e&2){let t=i.$implicit,n=p();s(),d("checked",n.selection.isSelected(t))("aria-label",n.checkboxLabel(t))}}function ge(e,i){e&1&&(r(0,"th",22),c(1," Rool "),l())}var Me=(e,i,t)=>({"text-red-500":e,"text-green-500":i,"text-blue-500":t});function Se(e,i){if(e&1&&(r(0,"td",20)(1,"span",23),c(2),l()()),e&2){let t=i.$implicit;s(),d("ngClass",H(2,Me,t.Rool==="ADMIN",t.Rool==="USER",t.Rool==="MODERATOR")),s(),I(t.Rool)}}function Re(e,i){e&1&&(r(0,"th",22),c(1," Name "),l())}function xe(e,i){if(e&1&&(r(0,"td",20),c(1),l()),e&2){let t=i.$implicit;s(),S(" ",t.name," ")}}function we(e,i){e&1&&(r(0,"th",22),c(1," username "),l())}function be(e,i){if(e&1&&(r(0,"td",20),c(1),l()),e&2){let t=i.$implicit;s(),S(" ",t.userName," ")}}function ye(e,i){e&1&&v(0,"tr",24)}function ve(e,i){if(e&1){let t=M();r(0,"tr",25),_("click",function(){let a=f(t).$implicit,m=p();return h(m.selection.toggle(a))}),l()}}function De(e,i){if(e&1&&(r(0,"tr",26)(1,"td",27),c(2),l()()),e&2){p();let t=O(6);s(2),S('No data matching the filter "',t.value,'"')}}var ke=()=>[5,10,25,100],Je=(()=>{let i=class i{constructor(n,o){this.authService=n,this._bottomSheet=o,this.displayedColumns=["select","username","Rool"],this.dataSource=new re,this.selection=new z(!0,[]),b(this,null,function*(){yield this.initializeData()})}initializeData(){return b(this,null,function*(){let o=(yield this.authService.getAllUsersWithRoles()).filter(a=>!a.rools.includes("ADMIN")).map(a=>{let m="user";return a.rools.includes("MODERATOR")&&(m="MODERATOR"),U(E({},a),{Rool:m})});this.dataSource.data=o})}openBottomSheet(){this._bottomSheet.open(de,{data:{SelectedRequests:this.selection.selected,type:"userRools"}}).afterDismissed().subscribe(()=>{this.initializeData(),this.selection.clear()})}ngAfterViewInit(){console.log("user rols management view init"),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(n){let o=n.target.value;this.dataSource.filter=o.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}isAllSelected(){let n=this.selection.selected.length,o=this.dataSource.data.length;return n===o}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.dataSource.data)}checkboxLabel(n){return n?`${this.selection.isSelected(n)?"deselect":"select"} row ${n.name+1}`:`${this.isAllSelected()?"deselect":"select"} all`}};i.\u0275fac=function(o){return new(o||i)(y(j),y(me))},i.\u0275cmp=A({type:i,selectors:[["app-user-rools-management"]],viewQuery:function(o,a){if(o&1&&(D(R,5),D(x,5)),o&2){let m;k(m=T())&&(a.paginator=m.first),k(m=T())&&(a.sort=m.first)}},standalone:!0,features:[F],decls:25,vars:6,consts:[[1,"flex","items-center","gap-3","mt-2"],["mat-raised-button","","class","mt-3","color","primary"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Rool"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","username"],["mat-header-row","",4,"matHeaderRowDef"],["class","cursor-pointer","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-raised-button","","color","primary",1,"mt-3",3,"click"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[3,"ngClass"],["mat-header-row",""],["mat-row","",1,"cursor-pointer",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,a){o&1&&(r(0,"div",0),u(1,fe,2,0,"button",1),r(2,"mat-form-field")(3,"mat-label"),c(4,"Filter"),l(),r(5,"input",2,3),_("keyup",function(w){return a.applyFilter(w)}),l()()(),r(7,"div",4)(8,"table",5),C(9,6),u(10,he,2,3,"th",7)(11,Ce,2,2,"td",8),g(),C(12,9),u(13,ge,2,0,"th",10)(14,Se,3,6,"td",8),g(),C(15,11),u(16,Re,2,0,"th",10)(17,xe,2,1,"td",8),g(),C(18,12),u(19,we,2,0,"th",10)(20,be,2,1,"td",8),g(),u(21,ye,1,0,"tr",13)(22,ve,1,0,"tr",14)(23,De,3,1,"tr",15),l(),v(24,"mat-paginator",16),l()),o&2&&(s(),V(1,a.selection.selected.length>0?1:-1),s(7),d("dataSource",a.dataSource),s(13),d("matHeaderRowDef",a.displayedColumns),s(),d("matRowDefColumns",a.displayedColumns),s(2),d("pageSizeOptions",P(5,ke)))},dependencies:[N,$,L,B,Q,q,W,ae,G,K,ee,X,J,te,Y,Z,ie,oe,ne,_e,x,ue,se,le,pe,R,ce],styles:["[_nghost-%COMP%]{display:block}table[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}"]});let e=i;return e})();export{Je as UserRoolsManagementComponent};
